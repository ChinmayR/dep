require 'formula'

class Wonkacli < Formula
  desc "wonkacli is a command-line interface to Wonka, Uber's service-to-service authentication system."
  homepage 'https://code.uberinternal.com/w/security/wonka'
  url 'gitolite@code.uber.internal:engsec/wonka-go.git', :using => :git
  head 'gitolite@code.uber.internal:engsec/wonka-go.git', :using => :git

  version "{{ .Version }}"

  bottle do
    root_url "https://s3.amazonaws.com/uber-devtools/wonkacli"
    cellar :any_skip_relocation
    {{ range .Bottles }}
    sha256 "{{ .SHASum }}" => :{{ .OSRelease }}{{ end }}
  end

  depends_on "go" => :build

  def install
    ENV.deparallelize
    system "make", "wonkacli/wonkacli"
    bin.install "wonkacli/wonkacli"
    man.install "wonkacli/wonkacli.1"

  end
end
